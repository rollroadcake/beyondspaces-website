(()=>{"use strict";var e={669:e=>{e.exports=jQuery}},t={};function o(n){var a=t[n];if(void 0!==a)return a.exports;var r=t[n]={exports:{}};return e[n](r,r.exports,o),r.exports}(()=>{function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}var t=o(669);t((function(o){function n(e){if(e.length){for(var t=["def","label","slug","rate","suboption_class","suboption_text","suboption_colour","attach_id","attach_uri","attach_name","attach_id_r","attach_uri_r"],o=document.createElement("table"),n=function(){var n=e[a];void 0===n.def&&(n.def="");var r=Object.keys(n);0===a&&function(e,t){for(var o=e.insertRow(),n=0;n<t.length;n++)o.insertCell().appendChild(document.createTextNode(t[n]))}(o,r);var c=o.insertRow();t.filter((function(e){return r.includes(e)})).forEach((function(e){var t=c.insertCell(),o="def"===e?Array.isArray(n[e])||"checked"===n[e]?"yes":"":void 0===n[e]?"":n[e];t.appendChild(document.createTextNode(o))}))},a=0;a<e.length;a++)n();return o}}function a(){"all"===i.value?o(d).hide():o(d).fadeIn()}function r(){"all_products"===u.value?(o(s).hide(),o(p).hide()):"specific_products"===u.value?(o(s).fadeIn(),o(p).hide()):(o(s).hide(),p.forEach((function(e){return o(e).hide()})),p.forEach((function(e){e.name===u.value&&o(e).fadeIn()})))}var c=document.getElementById("js_cpo_table");o(document.body).on("click","#js_cpo_view",(function(e){e.stopPropagation();var a=o("#cpo_settings_option_id").val(),r={action:"uni_cpo_exim_view",oid:a};return a&&t.ajax({type:"POST",url:ajaxurl,data:r,dataType:"json",beforeSend:function(){},success:function(e){if(c.innerHTML="",e.success){var t=e.data&&e.data.data&&void 0!==e.data.data.cpo_radio_options?e.data.data.cpo_radio_options:void 0===e.data.data.cpo_select_options?[]:e.data.data.cpo_select_options;if(t){var o=n(t);c.appendChild(o)}}else if(e.error){var a=document.createTextNode(e.error);c.appendChild(a)}},complete:function(){}}),!1})),o(document.body).on("click","#js_cpo_import",(function(e){e.stopPropagation();var n=o("#cpo_settings_option_id").val(),a=document.getElementById("js_cpo_import_file"),r=new FormData;return r.append("oid",n),r.append("action","uni_cpo_exim_import"),r.append("file",a.files[0]),n&&t.ajax({type:"POST",url:ajaxurl,data:r,contentType:!1,processData:!1,beforeSend:function(){},success:function(e){if(e.success){c.innerHTML="";var t=document.createTextNode("Success!");c.appendChild(t)}else if(e.data.error){c.innerHTML="";var o=document.createTextNode(e.data.error);c.appendChild(o)}},complete:function(){}}),!1})),o(document.body).on("click","#js_cpo_export",(function(n){n.stopPropagation();var a=o("#cpo_settings_option_id").val(),r={action:"uni_cpo_exim_export",oid:a};return a&&t.ajax({type:"POST",url:ajaxurl,data:r,dataType:"json",beforeSend:function(){},success:function(t){if(t.success){var o=function(t,o){for(var n="object"==e(t)?t:JSON.parse(t),a="",r=n[0].length,c=0;c<n.length;c++)a+=(r&&n[c].length<r?[""].concat(n[c]):n[c]).join(o)+"\r\n";return a}(t.data.data,t.data.delimiter),n=new Blob([o],{type:"text/csv;charset=utf-8;"});if(navigator.msSaveBlob)navigator.msSaveBlob(n,"suboptions_for_".concat(a,".csv"));else{var r=document.createElement("a");if(void 0!==r.download){var i=URL.createObjectURL(n);r.setAttribute("href",i),r.setAttribute("download","suboptions_for_".concat(a,".csv")),r.style.visibility="hidden",document.body.appendChild(r),r.click(),document.body.removeChild(r)}}}else if(t.error){c.innerHTML="";var d=document.createTextNode(t.error);c.appendChild(d)}},complete:function(){}}),!1}));var i=document.querySelector('select[name="copy_type"]'),d=document.querySelector('select[name="settings"]'),u=document.querySelector('select[name="destination_type"]'),s=document.querySelector('select[name="chosen_products"]'),p=document.querySelectorAll(".product_terms");a(),i.addEventListener("change",a),r(),u.addEventListener("change",r);var l=!1;o(document.body).on("click","#js_cpo_bulk_edit",(function(e){e.stopPropagation();var n=document.querySelector(".resultMessage"),a=document.querySelector('select[name="source"]'),r=document.querySelector('input[name="source"]'),c=new FormData;return c.append("action","uni_cpo_bulk_edit"),a?c.append("source",a.value):c.append("source",r.value),c.append("copy_type",i.value),c.append("settings",o(d).val()),c.append("destination_type",u.value),c.append("chosen_products",o(s).val()),p.forEach((function(e){e.name===u.value&&c.append(e.name,o(e).val())})),i&&!l&&t.ajax({type:"POST",url:ajaxurl,data:c,contentType:!1,processData:!1,beforeSend:function(){l=!0},success:function(e){if(e.success){var t=document.createTextNode("Success!");n.appendChild(t)}else if(e.data.error){var o=document.createTextNode(e.data.error);n.classList.add("error"),n.appendChild(o)}},complete:function(){setTimeout((function(){n.classList.remove("error"),n.innerHTML="",l=!1}),5e3)}}),!1}))}))})()})();